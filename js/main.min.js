"use strict";
function getCookie(e) {
    var o = document.cookie.match(new RegExp("(?:^|; )" + e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, "\\$1") + "=([^;]*)"));
    return o ? decodeURIComponent(o[1]) : void 0
}
function setCookie(e, o, t) {
    var n, i = (t = t || {}).expires;
    "number" == typeof i && i && ((n = new Date).setTime(n.getTime() + 1e3 * i),
        i = t.expires = n),
    i && i.toUTCString && (t.expires = i.toUTCString());
    var r = e + "=" + (o = encodeURIComponent(o));
    for (var c in t) {
        r += "; " + c;
        var a = t[c];
        !0 !== a && (r += "=" + a)
    }
    document.cookie = r
}
"use strict";
document.addEventListener("DOMContentLoaded", init),
    window.addEventListener("load", loaded);
var _btn = document.querySelector(".main-btn")
    , _currStep = 1
    , _audio_music = document.querySelector("#snd-music")
    , _audio_a0 = document.querySelector("#snd-a0")
    , _audio_b1 = document.querySelector("#snd-b1")
    , _audio_b2 = document.querySelector("#snd-b2")
    , _audio_b3 = document.querySelector("#snd-b3")
    , _audio_b4 = document.querySelector("#snd-b4")
    , _audio_b5 = document.querySelector("#snd-b5")
    , _audio_reels = document.querySelector("#snd-reels")
    , _audio_popup_1 = document.querySelector("#snd-popup-1")
    , _audio_popup_2 = document.querySelector("#snd-popup-2")
    , _audio_win = document.querySelector("#snd-win");
function loaded() {
    getCookie("cosmo-pharaoh-gold") ? (showPopup(2),
        document.querySelector(".main-cont").style.opacity = "1") : (document.querySelector(".intro").style.display = "block",
        document.querySelector(".intro").style.opacity = "1",
        document.querySelector(".intro-cont").classList.add("run"),
        setTimeout(hideIntro, 2500)),
        document.querySelector(".preload").style.display = "none",
        document.querySelector(".preloader").style.display = "none"
}
function hideIntro() {
    document.querySelector(".intro").classList.add("hide"),
        document.querySelector(".intro").addEventListener("animationend", function() {
            document.querySelector(".intro").style.display = "none"
        }),
        document.querySelector(".main-cont").style.opacity = "1",
        setTimeout(function() {
            for (var o = document.querySelectorAll(".slot-column"), e = 0; e < o.length; e++)
                setTimeout(function(e) {
                    o[e].classList.remove("slot-column-pos")
                }, 100 * e, e)
        }, 500),
        _btn.addEventListener("click", startSlotAnimation)
}
function init() {
    window.onresize(null)
}
var _contWidth = 1230
    , _contHeight = 880
    , _contWidthMob = 1140
    , _contHeightMob = 1750
    , _bgWidth = 2294
    , _bgHeight = 1074
    , _bgMobWidth = 894
    , _bgMobHeight = 2094
    , _popup1Width = 650
    , _popup1Height = 340
    , _popup2Width = 650
    , _popup2Height = 540
    , _introWidth = 1260
    , _introHeight = 340
    , _introWidthMob = 940
    , _introHeightMob = 460
    , _scale = 1
    , _wording = document.querySelector(".wording")
    , _wordTextMob = document.querySelector(".word-text-mob")
    , _wordTextDesk = document.querySelector(".word-text-desk")
    , _licText = document.querySelector(".lic-text");
window.onresize = function() {
    var e, o, t, n;
    _wording && (_wording.style.height = Math.round(.15 * window.innerHeight) + "px"),
        window.innerWidth <= 640 ? (_scale = Math.min(window.innerWidth / _contWidthMob, window.innerHeight / _contHeightMob, 1),
            document.querySelector(".main-cont").style.transform = "translateX(-50%) scale(" + _scale + ")",
            document.querySelector(".license").style.transform = "scale(" + .96 * _scale + ")",
            document.querySelector(".license").style.width = 100 / _scale + "%",
        _licText && (_licText.style.fontSize = Math.min(Math.round(16 * _scale * 2), 14) + "px"),
            _scale = Math.min(window.innerWidth / _introWidthMob, window.innerHeight / _introHeightMob, 1),
            document.querySelector(".intro-cont").style.transform = "translate(-50%, -50%) scale(" + _scale + ")",
            _scale = Math.max(window.innerWidth / _bgMobWidth, window.innerHeight / _bgMobHeight),
            document.querySelector(".bg-mob").style.transform = "translate(-50%, -50%) scale(" + _scale + ")",
        _wording && (e = _wording.clientWidth / (_wordTextMob.clientWidth + 10),
            o = _wording.clientHeight / (_wordTextMob.clientHeight + 10),
            _wordTextMob.style.transform = "scale(".concat(e, ",").concat(o, ")"))) : (_scale = Math.min(window.innerWidth / _contWidth, window.innerHeight / _contHeight, 1),
            document.querySelector(".main-cont").style.transform = "translate(-50%, -50%) scale(" + _scale + ")",
            document.querySelector(".license").style.transform = "scale(" + _scale + ")",
            document.querySelector(".license").style.width = 100 / _scale + "%",
        _licText && (_licText.style.fontSize = Math.min(Math.round(14 * _scale * 1), 14) + "px"),
            _scale = Math.min(window.innerWidth / _introWidth, window.innerHeight / _introHeight, 1),
            document.querySelector(".intro-cont").style.transform = "translate(-50%, -50%) scale(" + _scale + ")",
            _scale = Math.max(window.innerWidth / _bgWidth, window.innerHeight / _bgHeight),
            document.querySelector(".bg").style.transform = "translate(-50%, -50%) scale(" + _scale + ")",
        _wording && (t = _wording.clientWidth / (_wordTextDesk.clientWidth + 10),
            n = _wording.clientHeight / (_wordTextDesk.clientHeight + 10),
            _wordTextDesk.style.transform = "scale(".concat(t, ",").concat(n, ")"))),
    document.querySelector(".popup-1") && (_scale = Math.min(window.innerWidth / _popup1Width, window.innerHeight / _popup1Height, 1),
        document.querySelector(".popup-1").style.transform = "translate(-50%, -50%) scale(" + _scale + ")"),
    document.querySelector(".popup-2") && (_scale = Math.min(window.innerWidth / _popup2Width, window.innerHeight / _popup2Height, 1),
        document.querySelector(".popup-2").style.transform = "translate(-50%, -50%) scale(" + _scale + ")")
}
;
var _combos = [[["el-0010", "el-letk", "el-bird"], ["el-rman", "el-momy", "el-scrb"], ["el-leta", "el-book", "el-letq"], ["el-bird", "el-scrb", "el-rman"], ["el-letj", "el-book", "el-bird"]], [["el-leta", "el-rman", "el-letj"], ["el-scrb", "el-rman", "el-book"], ["el-letq", "el-rman", "el-momy"], ["el-book", "el-rman", "el-bird"], ["el-letj", "el-rman", "el-0010"]]];
function startSlotAnimation() {
    _btn.removeEventListener("click", startSlotAnimation),
        _btn.classList.add("disabled"),
        startColumnsAnimation()
}
function startColumnsAnimation() {
    for (var e = 1; e <= 5; e++)
        document.querySelector(".slot-column-" + e).classList.remove("slot-column-end"),
            document.querySelector(".slot-column-" + e).classList.add("slot-column-moving");
    _audio_music.volume = .5,
        _audio_music.play(),
        _audio_reels.currentTime = 0,
        _audio_reels.play(),
        setTimeout(function() {
            changeCombos(),
                stopColumnAnimation()
        }, 1e3)
}
function changeCombos() {
    for (var e = "", e = document.querySelector(".slot-cont").classList.contains("green") ? "green" : "red", o = 0; o < 5; o++)
        for (var t = 0; t < 3; t++) {
            var n = _combos[_currStep - 1][o][t];
            document.querySelector(".slot-column-" + (o + 1)).querySelector(".slot-element-" + (t + 1)).setAttribute("class", "slot-element slot-element-" + (t + 1) + " " + n + " " + e),
                document.querySelector(".slot-column-" + (o + 1)).querySelector(".slot-element-" + (t + 4)).setAttribute("class", "slot-element slot-element-" + (t + 4) + " " + n + " " + e)
        }
}
function stopColumnAnimation() {
    var e = 200
        , o = 500
        , t = 750;
    1 === _currStep && (document.querySelector(".slot-column-1").classList.remove("slot-column-moving"),
        document.querySelector(".slot-column-1").classList.add("slot-column-end"),
        _audio_a0.play(),
        setTimeout(function() {
            document.querySelector(".slot-column-2").classList.remove("slot-column-moving"),
                document.querySelector(".slot-column-2").classList.add("slot-column-end"),
                _audio_b1.play(),
                setTimeout(function() {
                    document.querySelector(".slot-column-3").style.opacity = "0.85",
                        document.querySelector(".slot-column-4").style.opacity = "0.85",
                        document.querySelector(".slot-column-5").style.opacity = "0.85",
                        setTimeout(function() {
                            document.querySelector(".slot-column-3").classList.remove("slot-column-moving"),
                                document.querySelector(".slot-column-3").classList.add("slot-column-end"),
                                document.querySelector(".slot-column-3").style.opacity = "1",
                                _audio_a0.play(),
                                setTimeout(function() {
                                    document.querySelector(".slot-column-4").classList.remove("slot-column-moving"),
                                        document.querySelector(".slot-column-4").classList.add("slot-column-end"),
                                        document.querySelector(".slot-column-4").style.opacity = "1",
                                        _audio_b2.play(),
                                        setTimeout(function() {
                                            document.querySelector(".slot-column-5").style.animationDuration = "0.1s",
                                                setTimeout(function() {
                                                    document.querySelector(".slot-column-5").classList.remove("slot-column-moving"),
                                                        document.querySelector(".slot-column-5").classList.add("slot-column-end"),
                                                        document.querySelector(".slot-column-5").style.opacity = "1",
                                                        document.querySelector(".slot-column-5").style.animationDuration = "",
                                                        _audio_a0.play(),
                                                        _audio_reels.pause(),
                                                        setTimeout(showPopup, o, 1)
                                                }, t)
                                        }, e)
                                }, o)
                        }, o)
                }, e)
        }, e)),
    2 === _currStep && setTimeout(function() {
        document.querySelector(".slot-column-1").classList.remove("slot-column-moving"),
            document.querySelector(".slot-column-1").classList.add("slot-column-end"),
            _audio_b1.play(),
            setTimeout(function() {
                document.querySelector(".slot-column-2").style.opacity = "0.85",
                    document.querySelector(".slot-column-3").style.opacity = "0.85",
                    document.querySelector(".slot-column-4").style.opacity = "0.85",
                    document.querySelector(".slot-column-5").style.opacity = "0.85",
                    setTimeout(function() {
                        document.querySelector(".slot-column-2").classList.remove("slot-column-moving"),
                            document.querySelector(".slot-column-2").classList.add("slot-column-end"),
                            document.querySelector(".slot-column-2").style.opacity = "1",
                            _audio_b2.play(),
                            setTimeout(function() {
                                document.querySelector(".slot-column-3").classList.remove("slot-column-moving"),
                                    document.querySelector(".slot-column-3").classList.add("slot-column-end"),
                                    document.querySelector(".slot-column-3").style.opacity = "1",
                                    _audio_b3.play(),
                                    setTimeout(function() {
                                        document.querySelector(".slot-column-4").style.animationDuration = "0.1s",
                                            document.querySelector(".slot-column-5").style.animationDuration = "0.1s",
                                            setTimeout(function() {
                                                document.querySelector(".slot-column-4").classList.remove("slot-column-moving"),
                                                    document.querySelector(".slot-column-4").classList.add("slot-column-end"),
                                                    document.querySelector(".slot-column-4").style.opacity = "1",
                                                    _audio_b4.play(),
                                                    setTimeout(function() {
                                                        document.querySelector(".slot-column-5").classList.remove("slot-column-moving"),
                                                            document.querySelector(".slot-column-5").classList.add("slot-column-end"),
                                                            document.querySelector(".slot-column-5").style.opacity = "1",
                                                            _audio_b5.play(),
                                                            _audio_reels.pause(),
                                                            _audio_music.pause(),
                                                            setTimeout(function() {
                                                                document.querySelector(".slot-combo").classList.add("combo-show"),
                                                                    _audio_win.play(),
                                                                    setTimeout(function() {
                                                                        setTimeout(function() {
                                                                            showPopup(2),
                                                                                document.querySelector(".slot-combo").classList.remove("combo-show")
                                                                        }, 2500)
                                                                    }, t)
                                                            }, o)
                                                    }, t)
                                            }, t)
                                    }, e)
                            }, o)
                    }, o)
            }, e)
    }, o)
}
function showPopup(e) {
    document.querySelector(".popup").style.display = "block",
        document.querySelector(".popup-cont").classList.add("popup-" + e),
        window.onresize(null),
    1 === e && (document.querySelector(".popup").classList.add("show"),
        document.querySelector("#turn-btn").addEventListener("click", hidePopup),
        _currStep++,
        _audio_popup_1.play()),
    2 === e && (document.querySelector(".popup").classList.add("show"),
        setTimeout(function() {
            document.querySelector(".popup-man").classList.add("up"),
                document.querySelector(".popup-coins").classList.add("big")
        }, 500),
        setCookie("cosmo-pharaoh-gold", 1),
        _audio_popup_2.play(),
        setTimeout(function() {
            _audio_music.currentTime = 0,
                _audio_music.play()
        }, 8e3))
}
function hidePopup() {
    document.querySelector("#turn-btn").removeEventListener("click", hidePopup),
        document.querySelector("#turn-btn").classList.add("disabled"),
        document.querySelector(".popup").classList.remove("show"),
        document.querySelector(".popup").classList.add("hide"),
        document.querySelector(".popup").addEventListener("animationend", delPopup),
        startColumnsAnimation()
}
function delPopup() {
    console.log("del pop"),
        document.querySelector(".popup-cont").classList.remove("popup-1"),
        document.querySelector(".popup").style.display = "none",
        document.querySelector(".popup").classList.remove("hide"),
        document.querySelector(".popup").removeEventListener("animationend", delPopup)
}
